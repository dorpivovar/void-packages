# Template file for 'helium-browser-bin'
pkgname=helium-browser-bin
version=0.9.2.1
revision=1
_realname="helium"
archs="x86_64 aarch64"
short_desc="Private, fast, and honest web browser based on Chromium (Binary)"
maintainer="Your Name <you@example.com>"
license="GPL-3.0-only, BSD-3-Clause"
homepage="https://github.com/imputnet/helium-linux"

_url="https://github.com/imputnet/helium-linux/releases/download/${version}"

case "$XBPS_TARGET_MACHINE" in
	x86_64)
		distfiles="${_url}/${_realname}-${version}-x86_64_linux.tar.xz"
		checksum=c031ecfc51283a46148ca3d4accf5000fc2ca8dbd44498653ff459b5e2cbda00
		;;
	aarch64)
		distfiles="${_url}/${_realname}-${version}-arm64_linux.tar.xz"
		checksum=afc05e563ee2e94a619c1d34a2f46df1f5d7bd6f3df4cbc197ca85e5190c29fb
		;;
esac

depends="gtk+3 nss alsa-lib xdg-utils libXScrnSaver libcups libgcrypt
 liberation-fonts-ttf dbus libpulseaudio pciutils libva libffi desktop-file-utils
 hicolor-icon-theme"

nostrip=yes

do_install() {
	local _target_dir="opt/${pkgname}"
	vmkdir "${_target_dir}"

	vcopy "*" "${_target_dir}"

	vmkdir usr/bin
	ln -sf "/${_target_dir}/helium-wrapper" "${DESTDIR}/usr/bin/helium-browser"

	sed -i 's/^Exec=.*/Exec=helium-browser %U/' "${DESTDIR}/${_target_dir}/helium.desktop"

	vinstall "${DESTDIR}/${_target_dir}/helium.desktop" 644 usr/share/applications "helium-browser.desktop"
	vinstall "${DESTDIR}/${_target_dir}/product_logo_256.png" 644 usr/share/pixmaps "helium-browser.png"
}
